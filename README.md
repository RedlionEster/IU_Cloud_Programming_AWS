# AWS Static Website Deployment with Terraform

This README provides a step-by-step guide for setting up a static website hosted on AWS S3 with CloudFront using Terraform.

## Prerequisites

- An AWS account with root user access.
- AWS CLI installed on your local machine.
- Terraform installed on your local machine.

## Setup Instructions

### Step 1: Log In to AWS

- Go to [AWS Console](https://aws.amazon.com)
- Login with your AWS root account credentials.

### Step 2: Create an IAM User

- In the AWS Console, search for “IAM” and navigate to the IAM service.

- Click on “Users” in the left sidebar and then “Add user”.
- Enter the following details:
  - User name: Enter a username (e.g., terraform-user).
  - Access type: Check “Provide user access to the AWS Management Console”.
  - Choose “Autogenerated password” and uncheck “Require password reset”.

- User name: Enter a username (e.g., terraform-user).
- Access type: Check “Provide user access to the AWS Management Console”.
- Choose “Autogenerated password” and uncheck “Require password reset”.

- Click on “Next: Permissions”.

### Step 3: Attach Policies to the IAM User

1.	Set permissions:
	•	Select “Attach existing policies directly”.
2. Attach the following policies:
	•	AmazonS3FullAccess
	•	CloudFrontFullAccess
	•	IAMFullAccess
3.	Click on “Next: Tags” and proceed to create the user.

### Step 4: Create Access Key

	1.	Navigate to IAM > Users, select the user you created.
	2.	Under Security credentials, click on “Create access key”.
	3.	Select use case: Choose “Command Line Interface (CLI)”.
	4.	Confirm the prompt and click on “Create access key”.
	5.	Download the CSV file with your Access Key ID and Secret Access Key.

### Step 5: Download and Install AWS CLI

	1.	Visit the AWS CLI installation page.
	2.	Download and install the CLI for your operating system.
	3.	Verify the installation:

aws --version



Step 6: Set Up AWS CLI

	1.	Open your terminal or command prompt.
	2.	Run the following command:

aws configure


	3.	Enter the following details:
	•	AWS Access Key ID: From the CSV file.
	•	AWS Secret Access Key: From the CSV file.
	•	Default region name: us-east-1 (or your preferred region).
	•	Default output format: json.

Step 7: Install Terraform

	1.	Visit the Terraform download page.
	2.	Download and install Terraform for your operating system.
	3.	Verify the installation:

terraform version



Step 8: Initialize and Deploy with Terraform

	1.	Place your Terraform configuration files in the same directory:
	•	main.tf
	•	variables.tf
	•	outputs.tf
	•	s3.tf
	•	cloudfront.tf
	•	Place your index.html file here as well.
	2.	Initialize Terraform:

terraform init

	•	This downloads necessary provider plugins (e.g., AWS).

	3.	Validate the Configuration:

terraform validate

	•	Checks syntax and configuration consistency.

	4.	Create an Execution Plan:

terraform plan

	•	Shows the actions Terraform will take.

	5.	Apply the Plan:

terraform apply

	•	Type yes when prompted to confirm the changes.

Step 9: Destroy Infrastructure

To avoid incurring charges, you can remove the resources when they’re no longer needed:

terraform destroy

	•	Confirm with yes to destroy all resources.

Understanding Terraform Configuration

	•	File Linking and Order:
	•	Terraform loads all .tf files in the directory, regardless of filename order.
	•	Files like main.tf, variables.tf, s3.tf, and cloudfront.tf are for organization only.
	•	Configuration Merging:
	•	All .tf files are merged into a single configuration during execution, allowing flexibility in splitting resources across files.
	•	Dependency Management:
	•	Terraform builds a dependency graph to determine resource creation order.
	•	Implicit dependencies are inferred when one resource references another (e.g., an S3 bucket policy depends on the S3 bucket).

Example:

resource "aws_s3_bucket" "site_bucket" {
  # S3 bucket configuration
}

resource "aws_s3_bucket_policy" "site_bucket_policy" {
  bucket = aws_s3_bucket.site_bucket.id  # Implicit dependency on S3 bucket
}
